(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[914],{4796:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/baby/[babyId]",function(){return a(8019)}])},8019:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var s=a(7876),l=a(4232),r=a(9099),n=a(6746),d=a(2009),i=a(6856);a(1616);var u=a(8151),o=a(6734),c=a(8706),m=a(2045),x=a(4846);function h(){let e=(0,r.useRouter)(),{babyId:t}=e.query,{t:a,i18n:h}=(0,x.Bd)(),[p,b]=(0,l.useState)(null),[y,g]=(0,l.useState)(new Date),[f,D]=(0,l.useState)(12),[j,C]=(0,l.useState)(0),[v,N]=(0,l.useState)("분유"),[w,k]=(0,l.useState)(""),[M,S]=(0,l.useState)([]),[_,E]=(0,l.useState)((0,u.k)(new Date,{weekStartsOn:0})),[F,P]=(0,l.useState)("input"),[G,B]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{if(!t)return;let e=(0,d.H9)(n.db,"babies",t),a=await (0,d.x7)(e);a.exists()&&b(a.data())})()},[t]);let R=async()=>{if(!t||!_)return;let e=new Date(_),a=(0,o.f)(e,6),s=(0,d.P)((0,d.rJ)(n.db,"records"),(0,d._M)("babyId","==",t),(0,d._M)("date",">=",(0,c.GP)(e,"yyyy-MM-dd")),(0,d._M)("date","<=",(0,c.GP)(a,"yyyy-MM-dd"))),l=await (0,d.GG)(s),r=[];l.forEach(e=>r.push({id:e.id,...e.data()})),S(r)};(0,l.useEffect)(()=>{R()},[t,_]);let A=async()=>{if(!t||!y||!v||("분유"===v||"모유"===v)&&!w)return;let e=(0,c.GP)(y,"yyyy-MM-dd"),s="".concat(String(f).padStart(2,"0"),":").concat(String(j).padStart(2,"0")),l="".concat(t,"-").concat(e,"-").concat(s,"-").concat(v);await (0,d.BN)((0,d.H9)(n.db,"records",l),{babyId:t,date:e,hour:f,minute:j,type:v,value:"분유"===v||"모유"===v?Number(w):1,timestamp:new Date}),k(""),B(a("saved")),setTimeout(()=>B(null),3e3),await R()},H=async e=>{await (0,d.kd)((0,d.H9)(n.db,"records",e)),await R()},O=async(e,t)=>{await (0,d.BN)((0,d.H9)(n.db,"records",e),{value:Number(t)},{merge:!0}),await R()},I=e=>P(e),T=e=>h.changeLanguage(e),X=Array.from({length:7},(e,t)=>(0,o.f)((0,u.k)(_,{weekStartsOn:0}),t)),q=Array.from({length:24},(e,t)=>t),J=e=>{let t=(0,c.GP)(e,"yyyy-MM-dd"),a=M.filter(e=>e.date===t),s=a.filter(e=>"분유"===e.type).reduce((e,t)=>e+Number(t.value||0),0),l=a.filter(e=>"모유"===e.type).reduce((e,t)=>e+Number(t.value||0),0);return{milkTotal:s,breastTime:l,totalMilk:s+3*l,peeCount:a.filter(e=>"소변"===e.type).length,poopCount:a.filter(e=>"대변"===e.type).length}};return(0,s.jsxs)("div",{style:{padding:"1rem",backgroundColor:"#fff",color:"#000",minHeight:"100vh"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,s.jsxs)("button",{onClick:()=>e.push("/"),style:{fontWeight:"bold",color:"#333"},children:["\uD83C\uDFE0 ",a("home")]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onClick:()=>T("ko"),children:"\uD83C\uDDF0\uD83C\uDDF7"}),(0,s.jsx)("button",{onClick:()=>T("en"),children:"\uD83C\uDDFA\uD83C\uDDF8"}),(0,s.jsx)("button",{onClick:()=>T("vi"),children:"\uD83C\uDDFB\uD83C\uDDF3"})]})]}),p&&(0,s.jsxs)("div",{style:{marginBottom:"1rem",padding:"1rem",backgroundColor:"#e3f2fd",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,s.jsxs)("h3",{children:["\uD83D\uDC76 ",a("babyInfo")]}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("strong",{children:[a("name"),":"]})," ",p.name]}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("strong",{children:[a("birthDate"),":"]})," ",p.birthdate]})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[(0,s.jsxs)("button",{onClick:()=>I("input"),style:{backgroundColor:"input"===F?"#0070f3":"#ccc",color:"#fff",padding:"8px 16px",borderRadius:"6px"},children:["\uD83D\uDCCC ",a("inputRecord")]}),(0,s.jsxs)("button",{onClick:()=>I("output"),style:{backgroundColor:"output"===F?"#0070f3":"#ccc",color:"#fff",padding:"8px 16px",borderRadius:"6px"},children:["\uD83D\uDCCC ",a("outputRecord")]})]}),"input"===F&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["\uD83D\uDCCC ",a("inputRecord")]}),(0,s.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg max-w-md space-y-4 shadow-md",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"mb-1 font-medium",children:a("date")}),(0,s.jsx)(i.Ay,{selected:y,onChange:e=>g(e),dateFormat:"yyyy-MM-dd",locale:m.ko,className:"border rounded p-2"})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"mb-1 font-medium",children:a("time")}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("select",{value:f,onChange:e=>D(Number(e.target.value)),className:"border rounded p-2 w-1/2",children:q.map(e=>(0,s.jsxs)("option",{value:e,children:[String(e).padStart(2,"0"),"시"]},e))}),(0,s.jsx)("select",{value:j,onChange:e=>C(Number(e.target.value)),className:"border rounded p-2 w-1/2",children:[0,15,30,45].map(e=>(0,s.jsxs)("option",{value:e,children:[String(e).padStart(2,"0"),"분"]},e))})]})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"mb-1 font-medium",children:a("type")}),(0,s.jsxs)("select",{value:v,onChange:e=>N(e.target.value),className:"border rounded p-2",children:[(0,s.jsxs)("option",{value:"분유",children:["\uD83C\uDF7C ",a("formulaMilk")]}),(0,s.jsxs)("option",{value:"모유",children:["\uD83E\uDD31 ",a("breastMilk")]})]})]}),("분유"===v||"모유"===v)&&(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"mb-1 font-medium",children:"분유"===v?a("amountMl"):a("durationMin")}),(0,s.jsx)("input",{type:"number",value:w,onChange:e=>k(e.target.value),className:"border rounded p-2",min:"0"})]}),(0,s.jsxs)("button",{onClick:A,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded transition duration-150",children:["\uD83D\uDCBE ",a("save")]}),G&&(0,s.jsx)("p",{className:"text-green-600",children:G})]})]}),"output"===F&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{children:["\uD83D\uDCCC ",a("outputRecord")]}),(0,s.jsx)(i.Ay,{selected:y,onChange:e=>g(e),dateFormat:"yyyy-MM-dd",locale:m.ko}),(0,s.jsxs)("ul",{className:"mt-4 w-full overflow-x-auto",children:[(0,s.jsxs)("li",{className:"grid grid-cols-[1fr_2fr_auto] gap-2 bg-gray-200 p-2 rounded-t",children:[(0,s.jsx)("span",{className:"font-medium",children:a("time")}),(0,s.jsx)("span",{className:"font-medium",children:a("detail")}),(0,s.jsx)("span",{className:"font-medium",children:a("actions")})]}),M.filter(e=>e.date===(0,c.GP)(y,"yyyy-MM-dd")).sort((e,t)=>60*e.hour+e.minute-(60*t.hour+t.minute)).map(e=>{let t="".concat(String(e.hour).padStart(2,"0"),":").concat(String(e.minute).padStart(2,"0")),l="분유"===e.type?"".concat(e.value,"ml"):"모유"===e.type?"".concat(e.value,"분"):e.value;return(0,s.jsxs)("li",{className:"grid grid-cols-[1fr_2fr_auto] gap-2 items-center bg-white p-2 border-b last:border-none",children:[(0,s.jsx)("span",{className:"text-gray-700",children:t}),(0,s.jsxs)("span",{className:"flex items-center gap-2",children:["분유"===e.type?"\uD83C\uDF7C":"\uD83E\uDD31"," ",(0,s.jsx)("strong",{className:"text-indigo-600",children:a("분유"===e.type?"formulaMilk":"breastMilk")})," ","— ",(0,s.jsx)("span",{className:"text-gray-800",children:l})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>{let t=prompt(a("editPrompt"),String(e.value));null!==t&&O(e.id,t)},className:"text-sm px-2 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded transition",children:["✏️ ",a("edit")]}),(0,s.jsxs)("button",{onClick:()=>H(e.id),className:"text-sm px-2 py-1 bg-red-500 hover:bg-red-600 text-white rounded transition",children:["\uD83D\uDDD1️ ",a("delete")]})]})]},e.id)})]}),(0,s.jsxs)("h3",{children:["\uD83D\uDCCA ",a("weeklySummary")]}),(0,s.jsx)("ul",{children:X.map(e=>{let{milkTotal:t,breastTime:a,totalMilk:l}=J(e);return(0,s.jsxs)("li",{children:[(0,c.GP)(e,"M/d (E)",{locale:m.ko}),": \uD83C\uDF7C ",t,"ml + \uD83E\uDD31 ",a,"분 = ",l,"ml"]},(0,c.GP)(e,"yyyy-MM-dd"))})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[701,121,39,636,593,792],()=>t(4796)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[914],{4796:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/baby/[babyId]",function(){return r(8019)}])},8019:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(7876),a=r(4232),l=r(9099),i=r(6746),d=r(2009),o=r(6856);r(1616);var u=r(8151),s=r(6734),c=r(8706),p=r(2045);function h(){let{babyId:e}=(0,l.useRouter)().query,[t,r]=(0,a.useState)(null),[h,y]=(0,a.useState)(new Date),[x,f]=(0,a.useState)(12),[D,g]=(0,a.useState)(0),[m,C]=(0,a.useState)("분유"),[b,j]=(0,a.useState)(""),[v,k]=(0,a.useState)([]),[S,w]=(0,a.useState)((0,u.k)(new Date,{weekStartsOn:0})),[M,E]=(0,a.useState)("input");(0,a.useEffect)(()=>{(async()=>{if(!e)return;let t=(0,d.H9)(i.db,"babies",e),n=await (0,d.x7)(t);n.exists()&&r(n.data())})()},[e]);let N=async()=>{if(!e||!S)return;let t=new Date(S),r=(0,s.f)(t,6),n=(0,d.P)((0,d.rJ)(i.db,"records"),(0,d._M)("babyId","==",e),(0,d._M)("date",">=",(0,c.GP)(t,"yyyy-MM-dd")),(0,d._M)("date","<=",(0,c.GP)(r,"yyyy-MM-dd"))),a=await (0,d.GG)(n),l=[];a.forEach(e=>l.push({id:e.id,...e.data()})),k(l)};(0,a.useEffect)(()=>{N()},[e,S]);let _=async()=>{if(!e||!h||!m||("분유"===m||"모유"===m)&&!b)return;let t=(0,c.GP)(h,"yyyy-MM-dd"),r="".concat(String(x).padStart(2,"0"),":").concat(String(D).padStart(2,"0")),n="".concat(e,"-").concat(t,"-").concat(r,"-").concat(m);await (0,d.BN)((0,d.H9)(i.db,"records",n),{babyId:e,date:t,hour:x,minute:D,type:m,value:"분유"===m||"모유"===m?Number(b):1,timestamp:new Date}),j(""),await N()},W=async e=>{try{await (0,d.kd)((0,d.H9)(i.db,"records",e)),await N()}catch(e){console.error("Error deleting record:",e)}},A=async(e,t)=>{try{let r=(0,d.H9)(i.db,"records",e);await (0,d.BN)(r,{value:Number(t)},{merge:!0}),await N()}catch(e){console.error("Error editing record:",e)}},P=e=>{E(e)},G=(e=>{let t=(0,u.k)(e,{weekStartsOn:0});return Array.from({length:7},(e,r)=>(0,s.f)(t,r))})(S),F=Array.from({length:24},(e,t)=>t),I=e=>{let t=(0,c.GP)(e,"yyyy-MM-dd"),r=v.filter(e=>e.date===t),n=r.filter(e=>"분유"===e.type).reduce((e,t)=>e+Number(t.value||0),0),a=r.filter(e=>"모유"===e.type).reduce((e,t)=>e+Number(t.value||0),0);return{milkTotal:n,breastTime:a,totalMilk:n+3*a,peeCount:r.filter(e=>"소변"===e.type).length,poopCount:r.filter(e=>"대변"===e.type).length}};return(0,n.jsxs)("div",{style:{backgroundColor:"#ffffff",color:"#000000",minHeight:"100vh",padding:"1rem"},children:[(0,n.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[(0,n.jsx)("button",{onClick:()=>P("input"),style:{backgroundColor:"input"===M?"#0070f3":"#f0f0f0",color:"#fff",padding:"8px 16px",borderRadius:"6px",border:"none",cursor:"pointer",fontWeight:"bold"},children:"\uD83D\uDCCC 기록 입력"}),(0,n.jsx)("button",{onClick:()=>P("output"),style:{backgroundColor:"output"===M?"#0070f3":"#f0f0f0",color:"#fff",padding:"8px 16px",borderRadius:"6px",border:"none",cursor:"pointer",fontWeight:"bold"},children:"\uD83D\uDCCC 기록 출력"})]}),"input"===M&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{children:"\uD83D\uDCCC 기록 입력"}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",backgroundColor:"#f5f5f5",padding:"1rem",borderRadius:"8px",maxWidth:"600px"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,n.jsx)("span",{style:{minWidth:"80px",fontWeight:"bold"},children:"\uD83D\uDCC5 날짜"}),(0,n.jsx)(o.Ay,{selected:h,onChange:e=>y(e),dateFormat:"yyyy-MM-dd",locale:p.ko})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,n.jsx)("span",{style:{minWidth:"80px",fontWeight:"bold"},children:"⏰ 시간"}),(0,n.jsx)("select",{value:x,onChange:e=>f(Number(e.target.value)),children:F.map(e=>(0,n.jsxs)("option",{value:e,children:[String(e).padStart(2,"0"),"시"]},e))}),(0,n.jsx)("select",{value:D,onChange:e=>g(Number(e.target.value)),children:[0,15,30,45].map(e=>(0,n.jsxs)("option",{value:e,children:[String(e).padStart(2,"0"),"분"]},e))})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,n.jsx)("span",{style:{minWidth:"80px",fontWeight:"bold"},children:"\uD83D\uDCC4 종류"}),(0,n.jsxs)("select",{value:m,onChange:e=>C(e.target.value),children:[(0,n.jsx)("option",{value:"분유",children:"\uD83C\uDF7C 분유"}),(0,n.jsx)("option",{value:"모유",children:"\uD83E\uDD31 모유"}),(0,n.jsx)("option",{value:"소변",children:"\uD83D\uDCA7 소변"}),(0,n.jsx)("option",{value:"대변",children:"\uD83D\uDCA9 대변"})]})]}),("분유"===m||"모유"===m)&&(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,n.jsx)("span",{style:{minWidth:"80px",fontWeight:"bold"},children:"분유"===m?"\uD83C\uDF7C 용량":"⏱️ 시간"}),(0,n.jsx)("input",{type:"number",placeholder:"분유"===m?"ml":"분",value:b,onChange:e=>j(e.target.value),style:{padding:"6px",width:"100px"}})]}),(0,n.jsx)("button",{onClick:_,style:{backgroundColor:"#28a745",color:"#fff",padding:"10px 20px",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"bold"},children:"\uD83D\uDCBE 저장"})]})]}),"output"===M&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{children:"\uD83D\uDCC5 기록 출력"}),(0,n.jsxs)("div",{style:{marginBottom:"10px"},children:["날짜 선택:"," ",(0,n.jsx)(o.Ay,{selected:h,onChange:e=>y(e),dateFormat:"yyyy-MM-dd",locale:p.ko})]}),(0,n.jsxs)("div",{style:{backgroundColor:"#f5f5f5",padding:"1rem",borderRadius:"8px"},children:[(0,n.jsxs)("h3",{children:["\uD83D\uDCC5 ",(0,c.GP)(h,"M/d (E)",{locale:p.ko})," 기록"]}),(0,n.jsx)("ul",{children:v.filter(e=>e.date===(0,c.GP)(h,"yyyy-MM-dd")).sort((e,t)=>60*e.hour+e.minute-(60*t.hour+t.minute)).map(e=>(0,n.jsxs)("li",{children:[String(e.hour).padStart(2,"0"),":",String(e.minute).padStart(2,"0")," /"," ","분유"===e.type&&"\uD83C\uDF7C 분유 / ".concat(e.value,"ml"),"모유"===e.type&&"\uD83E\uDD31 모유 / ".concat(e.value,"분"),"소변"===e.type&&"\uD83D\uDCA7 소변","대변"===e.type&&"\uD83D\uDCA9 대변",["분유","모유"].includes(e.type)&&(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)("button",{className:"text-blue-600 hover:underline cursor-pointer hover:scale-105 transition-transform duration-200",onClick:()=>{let t=prompt("새 값 입력",String(e.value));null!==t&&A(e.id,t)},children:" 수정 "}),(0,n.jsx)("button",{className:"text-red-600 hover:underline cursor-pointer hover:scale-105 transition-transform duration-200 ml-2",onClick:()=>W(e.id),children:"삭제"})]})]},e.id))}),(0,n.jsx)("hr",{}),(0,n.jsx)("h4",{children:"\uD83D\uDCCA 주간 요약"}),(0,n.jsx)("ul",{children:G.map(e=>{let{milkTotal:t,breastTime:r,totalMilk:a,peeCount:l,poopCount:i}=I(e);return(0,n.jsxs)("li",{children:[(0,c.GP)(e,"E",{locale:p.ko}),"요일: \uD83C\uDF7C ",t,"ml + \uD83E\uDD31 ",r,"분 = ",a,"ml / \uD83D\uDCA7 ",l,"회 / \uD83D\uDCA9 ",i,"회"]},(0,c.GP)(e,"yyyy-MM-dd"))})})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[701,121,39,636,593,792],()=>t(4796)),_N_E=e.O()}]);
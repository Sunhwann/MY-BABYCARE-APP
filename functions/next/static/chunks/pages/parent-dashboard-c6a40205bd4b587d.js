(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[475],{1026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return o}});let n=r(4232);function o(e,t){let r=(0,n.useRef)(null),o=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=o.current;t&&(o.current=null,t())}else e&&(r.current=l(e,n)),t&&(o.current=l(t,n))},[e,t])}function l(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1639:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return _},useLinkStatus:function(){return C}});let n=r(8365),o=r(7876),l=n._(r(4232)),u=r(6658),a=r(1851),i=r(6225),s=r(8407),d=r(2696),c=r(8265),f=r(2343),p=r(8940),b=r(7469),h=r(1026);r(3724);let y=new Set;function x(e,t,r,n){if((0,a.isLocalURL)(t)){if(!n.bypassPrefetchedCheck){let o=t+"%"+r+"%"+(void 0!==n.locale?n.locale:"locale"in e?e.locale:void 0);if(y.has(o))return;y.add(o)}e.prefetch(t,r,n).catch(e=>{})}}function g(e){return"string"==typeof e?e:(0,i.formatUrl)(e)}let j=l.default.forwardRef(function(e,t){let r,n,{href:i,as:y,children:j,prefetch:v=null,passHref:C,replace:_,shallow:m,scroll:k,locale:w,onClick:D,onNavigate:M,onMouseEnter:R,onTouchStart:O,legacyBehavior:P=!1,...E}=e;r=j,P&&("string"==typeof r||"number"==typeof r)&&(r=(0,o.jsx)("a",{children:r}));let S=l.default.useContext(c.RouterContext),I=!1!==v,{href:L,as:A}=l.default.useMemo(()=>{if(!S){let e=g(i);return{href:e,as:y?g(y):e}}let[e,t]=(0,u.resolveHref)(S,i,!0);return{href:e,as:y?(0,u.resolveHref)(S,y):t||e}},[S,i,y]),T=l.default.useRef(L),B=l.default.useRef(A);P&&(n=l.default.Children.only(r));let H=P?n&&"object"==typeof n&&n.ref:t,[q,U,G]=(0,f.useIntersection)({rootMargin:"200px"}),N=l.default.useCallback(e=>{(B.current!==A||T.current!==L)&&(G(),B.current=A,T.current=L),q(e)},[A,L,G,q]),W=(0,h.useMergedRef)(N,H);l.default.useEffect(()=>{S&&U&&I&&x(S,L,A,{locale:w})},[A,L,U,w,I,null==S?void 0:S.locale,S]);let F={ref:W,onClick(e){P||"function"!=typeof D||D(e),P&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(e),S&&(e.defaultPrevented||function(e,t,r,n,o,l,u,i,s){let{nodeName:d}=e.currentTarget;if(!("A"===d.toUpperCase()&&function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||e.currentTarget.hasAttribute("download"))){if(!(0,a.isLocalURL)(r)){o&&(e.preventDefault(),location.replace(r));return}e.preventDefault(),(()=>{if(s){let e=!1;if(s({preventDefault:()=>{e=!0}}),e)return}let e=null==u||u;"beforePopState"in t?t[o?"replace":"push"](r,n,{shallow:l,locale:i,scroll:e}):t[o?"replace":"push"](n||r,{scroll:e})})()}}(e,S,L,A,_,m,k,w,M))},onMouseEnter(e){P||"function"!=typeof R||R(e),P&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),S&&x(S,L,A,{locale:w,priority:!0,bypassPrefetchedCheck:!0})},onTouchStart:function(e){P||"function"!=typeof O||O(e),P&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),S&&x(S,L,A,{locale:w,priority:!0,bypassPrefetchedCheck:!0})}};if((0,s.isAbsoluteUrl)(A))F.href=A;else if(!P||C||"a"===n.type&&!("href"in n.props)){let e=void 0!==w?w:null==S?void 0:S.locale;F.href=(null==S?void 0:S.isLocaleDomain)&&(0,p.getDomainLocale)(A,e,null==S?void 0:S.locales,null==S?void 0:S.domainLocales)||(0,b.addBasePath)((0,d.addLocale)(A,e,null==S?void 0:S.defaultLocale))}return P?l.default.cloneElement(n,F):(0,o.jsx)("a",{...E,...F,children:r})}),v=(0,l.createContext)({pending:!1}),C=()=>(0,l.useContext)(v),_=j;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2343:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return i}});let n=r(4232),o=r(4754),l="function"==typeof IntersectionObserver,u=new Map,a=[];function i(e){let{rootRef:t,rootMargin:r,disabled:i}=e,s=i||!l,[d,c]=(0,n.useState)(!1),f=(0,n.useRef)(null),p=(0,n.useCallback)(e=>{f.current=e},[]);return(0,n.useEffect)(()=>{if(l){if(s||d)return;let e=f.current;if(e&&e.tagName)return function(e,t,r){let{id:n,observer:o,elements:l}=function(e){let t,r={root:e.root||null,margin:e.rootMargin||""},n=a.find(e=>e.root===r.root&&e.margin===r.margin);if(n&&(t=u.get(n)))return t;let o=new Map;return t={id:r,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=o.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)})},e),elements:o},a.push(r),u.set(r,t),t}(r);return l.set(e,t),o.observe(e),function(){if(l.delete(e),o.unobserve(e),0===l.size){o.disconnect(),u.delete(n);let e=a.findIndex(e=>e.root===n.root&&e.margin===n.margin);e>-1&&a.splice(e,1)}}}(e,e=>e&&c(e),{root:null==t?void 0:t.current,rootMargin:r})}else if(!d){let e=(0,o.requestIdleCallback)(()=>c(!0));return()=>(0,o.cancelIdleCallback)(e)}},[s,r,t,d,f.current]),[p,d,(0,n.useCallback)(()=>{c(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3724:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"errorOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},4378:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/parent-dashboard",function(){return r(5608)}])},5608:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(7876),o=r(4232),l=r(6746),u=r(9099),a=r(2009),i=r(4200),s=r(8230),d=r.n(s);function c(){let[e,t]=(0,o.useState)([]),[r,s]=(0,o.useState)(null),[c,f]=(0,o.useState)([]),p=(0,u.useRouter)();(0,o.useEffect)(()=>{let e=async()=>{f((await (0,a.GG)((0,a.rJ)(l.db,"accessRequests"))).docs.map(e=>({id:e.id,...e.data()})).filter(e=>"rejected"!==e.status))};(async()=>{let r=l.j2.currentUser;if(!r)return;let n=await (0,a.x7)((0,a.H9)(l.db,"users",r.uid));n.exists()&&(s(n.data()),t((await (0,a.GG)((0,a.P)((0,a.rJ)(l.db,"babies"),(0,a._M)("sharedWith","array-contains",r.uid)))).docs.map(e=>({id:e.id,...e.data()}))),await e())})()},[]);let b=async e=>{try{let t=(0,a.H9)(l.db,"babies",e.babyId),r=await (0,a.x7)(t);if(!r.exists())return alert("❌ 아기 정보를 찾을 수 없습니다.");let n=r.data().sharedWith||[];await (0,a.mZ)(t,{sharedWith:Array.from(new Set([...n,e.requestedBy]))}),await (0,a.kd)((0,a.H9)(l.db,"accessRequests",e.id)),await g(),alert("✅ 접근 요청을 승인했습니다.")}catch(e){console.error(e),alert("⚠️ 승인 처리 중 오류가 발생했습니다.")}},h=async e=>{try{await (0,a.kd)((0,a.H9)(l.db,"accessRequests",e)),f(t=>t.filter(t=>t.id!==e)),alert("❌ 요청이 거절되었습니다.")}catch(e){console.error(e),alert("⚠️ 거절 처리 중 오류 발생.")}},y=async e=>{try{await (0,a.kd)((0,a.H9)(l.db,"babies",e)),t(t=>t.filter(t=>t.id!==e)),alert("✅ 아기를 삭제했습니다.")}catch(e){console.error(e),alert("⚠️ 삭제 중 오류 발생.")}},x=async()=>{try{await (0,i.CI)(l.j2),p.push("/login")}catch(e){console.error("로그아웃 실패:",e),alert("⚠️ 로그아웃 오류.")}},g=async()=>{f((await (0,a.GG)((0,a.rJ)(l.db,"accessRequests"))).docs.map(e=>({id:e.id,...e.data()})).filter(e=>"rejected"!==e.status))};return r?(0,n.jsxs)("div",{style:{padding:"20px",backgroundColor:"#f9f9f9",minHeight:"100vh",position:"relative"},children:[(0,n.jsx)("button",{onClick:x,style:{position:"absolute",top:"20px",right:"20px",backgroundColor:"#555",color:"#fff",borderRadius:"6px",padding:"8px 14px",cursor:"pointer"},children:"\uD83D\uDEAA 로그아웃"}),(0,n.jsxs)("h1",{style:{fontSize:"32px",fontWeight:"bold"},children:["안녕하세요, ",r.name," 님 \uD83D\uDC4B"]}),(0,n.jsx)("h2",{style:{color:"#666",marginBottom:"20px"},children:"역할: 보호자"}),(0,n.jsx)("button",{onClick:()=>p.push("/register-baby"),style:{backgroundColor:"#4CAF50",color:"white",border:"none",padding:"12px 20px",borderRadius:"6px",fontSize:"16px",marginBottom:"20px"},children:"➕ 아기 등록하기"}),(0,n.jsx)("h3",{children:"\uD83C\uDF7C 내 아기 목록:"}),0===e.length?(0,n.jsx)("p",{children:"등록된 아기가 없습니다."}):(0,n.jsx)("ul",{style:{padding:"0"},children:e.map(e=>(0,n.jsxs)("li",{style:{backgroundColor:"#fff",padding:"10px",borderRadius:"6px",marginBottom:"10px",display:"flex",justifyContent:"space-between"},children:[(0,n.jsxs)(d(),{href:"/baby/".concat(e.id),style:{color:"#4CAF50",fontWeight:"bold"},children:[e.name," (",e.birthdate,")"]}),(0,n.jsx)("button",{onClick:()=>y(e.id),style:{backgroundColor:"#f44336",color:"white",border:"none",padding:"6px 12px",borderRadius:"6px"},children:"❌ 삭제"})]},e.id))}),(0,n.jsx)("h3",{children:"\uD83D\uDD10 접근 요청 목록:"}),0===c.length?(0,n.jsx)("p",{children:"접근 요청이 없습니다."}):(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:c.map(e=>(0,n.jsxs)("div",{style:{padding:"12px",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"#fff"},children:[(0,n.jsxs)("p",{children:["\uD83D\uDC76 아기 ID: ",e.babyId]}),(0,n.jsxs)("p",{children:["\uD83D\uDE4B 요청자 UID: ",e.requestedBy]}),(0,n.jsxs)("p",{children:["\uD83D\uDD52 상태: ",e.status]}),(0,n.jsxs)("div",{style:{marginTop:"10px",display:"flex",gap:"10px"},children:[(0,n.jsx)("button",{onClick:()=>b(e),style:{backgroundColor:"#4CAF50",color:"white",border:"none",padding:"6px 10px",borderRadius:"4px"},children:"✅ 승인"}),(0,n.jsx)("button",{onClick:()=>h(e.id),style:{backgroundColor:"#f44336",color:"white",border:"none",padding:"6px 10px",borderRadius:"4px"},children:"❌ 거절"})]})]},e.id))})]}):(0,n.jsx)("div",{children:"로딩 중..."})}},8230:(e,t,r)=>{e.exports=r(1639)},8940:(e,t,r)=>{"use strict";function n(e,t,r,n){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return n}}),r(7810),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(4378)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[866],{433:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var a=t(7876),d=t(4232),i=t(6746),r=t(2009);function u(){let[e,s]=(0,d.useState)([]);(0,d.useEffect)(()=>{(async()=>{let e=i.j2.currentUser;if(!e)return;let t=(0,r.P)((0,r.rJ)(i.db,"accessRequests"),(0,r._M)("status","==","pending")),a=await (0,r.GG)(t),d=[];for(let s of a.docs){let t=s.data(),a=await (0,r.x7)((0,r.H9)(i.db,"babies",t.babyId));a.exists()&&a.data().createdBy===e.uid&&d.push({id:s.id,...t})}s(d)})()},[]);let t=async e=>{let s=(0,r.H9)(i.db,"babies",e.babyId),t=await (0,r.x7)(s);if(t.exists()){let a=[...t.data().sharedWith||[],e.requestedBy];await (0,r.mZ)(s,{sharedWith:a}),await (0,r.mZ)((0,r.H9)(i.db,"accessRequests",e.id),{status:"approved"}),alert("승인 완료!")}};return(0,a.jsxs)("div",{style:{padding:"20px"},children:[(0,a.jsx)("h1",{children:"\uD83D\uDC69‍⚕️ 접근 요청 승인"}),(0,a.jsx)("ul",{children:e.map(e=>(0,a.jsxs)("li",{children:["Baby ID: ",e.babyId,", 요청자: ",e.requestedBy,(0,a.jsx)("button",{onClick:()=>t(e),children:"승인"})]},e.id))})]})}},4112:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/requests",function(){return t(433)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[636,593,792],()=>s(4112)),_N_E=e.O()}]);